
%include "memory"
%include "math"
%include "procedures"
%include "control"

%macro callOp(op, numerator, denominator) {
	%stack:push(%numerator)
	%stack:push(%denominator)
	%call(%op)
	%stack:pop()
}
%macro testOp(op, char, numerator, denominator) {
	outu %numerator
	outc %char
	outu %denominator
	outc 61
	%callOp(%op, %numerator, %denominator)
	outur
}
%macro testDivRem(numerator, denominator) {
	%testOp(divide, 47, %numerator, %denominator)
	outc 37
	mov %MEMORY_LAYOUT:SEG_TEMP
	ldt %denominator
	str %numerator
	strsr
	outum
	outc 10
}
%macro testPower(a, b) {
	%testOp(power, 94, %a, %b)
	outc 10
}

%testDivRem(0, 1)
%testDivRem(0, 5)
%testDivRem(1, 1)
%testDivRem(1, 30)
%testDivRem(32169, 2)
%testDivRem(10, 3)
%testDivRem(512, 8)
%testDivRem(512, 1024)
%testDivRem(89, 13)

outc 10
%testPower(1, 1)
%testPower(1, 0)
%testPower(0, 1)
%testPower(0, 0)
%testPower(10, 1)
%testPower(10, 0)
%testPower(2, 2)
%testPower(2, 10)
%testPower(3, 8)
%testPower(10, 4)
%testPower(213, 2)
%testPower(3, 9)
%testPower(7, 5)

