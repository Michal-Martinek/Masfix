%include "control"

%define ERR_ASSERT 0

%macro error(code) {
	outc '\n'
	outc 'E'
	outc 'R'
	outc 'R'
	outc 'O'
	outc 'R'
	outc ':'
	outc ' '
	outu %code
	outc '\n'
	jmp end
}

%macro assert(cond) {
	%if {
		%cond
		leq 0
	,
		%error(%ERR_ASSERT) ; TODO source info
	}
}
